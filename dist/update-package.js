// Generated by CoffeeScript 1.10.0
(function() {
  var PROPS, R, fs, path, promisify, read, readfile, write, writefile;

  R = require('ramda');

  fs = require('fs');

  path = require('path');

  promisify = require('./promisify');

  PROPS = ["name", "version", "description", "author", "license", "repository", "keywords"];

  readfile = promisify(fs.readFile);

  writefile = promisify(fs.writeFile);

  read = function(file) {
    return readfile(path.join(process.cwd(), file)).then(JSON.parse);
  };

  write = function(obj) {
    return writefile(path.join(process.cwd(), 'package.json'), JSON.stringify(obj, null, 2));
  };

  module.exports = function() {
    return Promise.all([read('package.json'), read('__tmp__/package.json')]).then(function(arg) {
      var a, b;
      a = arg[0], b = arg[1];
      return R.merge(b, R.omit(['scripts', 'main'], a));
    }).then(write)["catch"](function(err) {
      return console.log('ERROR', err);
    });
  };

}).call(this);

// Generated by CoffeeScript 1.10.0
(function() {
  var BLACKLIST, R, fs, moveFiles, mv, path, promisify, readDir, rimraf, rm;

  R = require('ramda');

  promisify = require('./promisify');

  path = require('path');

  fs = require('fs');

  rimraf = promisify(require('rimraf'));

  BLACKLIST = ['.git', 'package.json'];

  readDir = promisify(fs.readdir);

  mv = promisify(fs.rename);

  rm = function(dir) {
    return rimraf(path.join(process.cwd(), dir));
  };

  moveFiles = function(src, dest) {
    var destPath, srcPath;
    srcPath = path.join(process.cwd(), src);
    destPath = path.join(process.cwd(), dest);
    return readDir(srcPath).then(R.filter(function(file) {
      return !R.contains(file, BLACKLIST);
    })).then(function(files) {
      return Promise.all(R.map((function(file) {
        return mv(path.join(srcPath, file), path.join(destPath, file));
      }), files));
    });
  };

  module.exports = function() {
    return moveFiles('__tmp__', '.').then(function() {
      return rm('__tmp__');
    });
  };

}).call(this);
